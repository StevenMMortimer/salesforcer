<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Convert Leads — sf_convert_lead • salesforcer</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Convert Leads — sf_convert_lead"><meta property="og:description" content="
Converts Leads each into an Account, Contact, as well as (optionally) an Opportunity."><meta property="og:image" content="https://stevenmmortimer.github.io/salesforcer/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98603021-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98603021-2');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">salesforcer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/getting-started.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/supported-queries.html">Supported Queries</a>
    </li>
    <li>
      <a href="../articles/working-with-bulk-apis.html">Working with Bulk APIs</a>
    </li>
    <li>
      <a href="../articles/working-with-reports.html">Working with Reports</a>
    </li>
    <li>
      <a href="../articles/working-with-attachments.html">Working with Attachments</a>
    </li>
    <li>
      <a href="../articles/working-with-metadata.html">Working with Metadata</a>
    </li>
    <li>
      <a href="../articles/passing-control-args.html">Passing Control Args</a>
    </li>
    <li>
      <a href="../articles/transitioning-from-RForcecom.html">Transitioning from RForcecom</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/StevenMMortimer/salesforcer" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert Leads</h1>
    <small class="dont-index">Source: <a href="https://github.com/StevenMMortimer/salesforcer/blob/HEAD/R/utils-org.R" class="external-link"><code>R/utils-org.R</code></a></small>
    <div class="hidden name"><code>sf_convert_lead.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>Converts Leads each into an Account, Contact, as well as (optionally) an Opportunity.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">sf_convert_lead</span><span class="op">(</span>
  <span class="va">input_data</span>,
  guess_types <span class="op">=</span> <span class="cn">TRUE</span>,
  api_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SOAP"</span><span class="op">)</span>,
  control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>,
  <span class="va">...</span>,
  verbose <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>input_data</dt>
<dd><p><code>named vector</code>, <code>matrix</code>, <code>data.frame</code>, or
<code>tbl_df</code>; data can be coerced into a <code>data.frame</code>. See the details
below on how format your input data to control things like whether an opportunity
will be created, an email will be sent to the new owner, and other control options.</p></dd>
<dt>guess_types</dt>
<dd><p><code>logical</code>; indicating whether or not to use <code>col_guess()</code>
to try and cast the data returned in the recordset. If <code>TRUE</code> then
<code>col_guess()</code> is used, if <code>FALSE</code> then all fields will be returned
as character. This is helpful when <code>col_guess()</code> will mangle field values
in Salesforce that you'd like to preserve during translation into a <code>tbl_df</code>,
like numeric looking values that must be preserved as strings ("48.0").</p></dd>
<dt>api_type</dt>
<dd><p><code>character</code>; one of <code>"REST"</code>, <code>"SOAP"</code>,
<code>"Bulk 1.0"</code>, or <code>"Bulk 2.0"</code> indicating which API to use when
making the request.</p></dd>
<dt>control</dt>
<dd><p><code>list</code>; a list of parameters for controlling the behavior of
the API call being used. For more information of what parameters are available
look at the documentation for <code><a href="sf_control.html">sf_control</a></code>.</p></dd>
<dt>...</dt>
<dd><p>arguments passed to <code><a href="sf_control.html">sf_control</a></code></p></dd>
<dt>verbose</dt>
<dd><p><code>logical</code>; an indicator of whether to print additional
detail for each API call, which is useful for debugging. More specifically, when
set to <code>TRUE</code> the URL, header, and body will be printed for each request,
along with additional diagnostic information where available.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>tbl_df</code> with details of the converted record</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>When converting leads owned by a queue, the owner must be specified.
This is because accounts and contacts cannot be owned by a queue. Below is a
complete list of options to control the conversion process. Include a column
in your input data to specify an option for each record. For example, if you
want opportunities to not be created for each converted lead then add a column
in your input data called <code>doNotCreateOpportunity</code> and set its value to
<code>TRUE</code>. The default is <code>FALSE</code> which creates opportunities. The order
of columns in the input data does not matter, just that the names
match (case-insensitive).</p><dl><dt>leadId</dt>
<dd><p>ID of the Lead to convert. Required.</p></dd>

<dt>convertedStatus</dt>
<dd><p>Valid LeadStatus value for a converted lead. Required.</p></dd>

<dt>accountId</dt>
<dd><p>Id of the Account into which the lead will be merged. Required
only when updating an existing account, including person accounts. If no
accountId is specified, then the API creates a new account.</p></dd>

<dt>contactId</dt>
<dd><p>Id of the Contact into which the lead will be merged (this
contact must be associated with the specified accountId, and an accountId
must be specified). Required only when updating an existing contact. If no
contactId is specified, then the API creates a new contact that is implicitly
associated with the Account.</p></dd>

<dt>ownerId</dt>
<dd><p>Specifies the Id of the person to own any newly created account,
contact, and opportunity. If the client application does not specify this
value, then the owner of the new object will be the owner of the lead.</p></dd>

<dt>opportunityId</dt>
<dd><p>The Id of an existing opportunity to relate to the lead.
The opportunityId and opportunityName arguments are mutually exclusive. Specifying
a value for both results in an error. If doNotCreateOpportunity argument is
<code>TRUE</code>, then no Opportunity is created and this field must be left blank;
otherwise, an error is returned.</p></dd>

<dt>doNotCreateOpportunity</dt>
<dd><p>Specifies whether to create an Opportunity during
lead conversion (<code>FALSE</code>, the default) or not (<code>TRUE</code>). Set this flag
to <code>TRUE</code> only if you do not want to create an opportunity from the lead.
An opportunity is created by default.</p></dd>

<dt>opportunityName</dt>
<dd><p>Name of the opportunity to create. If no name is specified,
then this value defaults to the company name of the lead. The maximum length
of this field is 80 characters. The opportunityId and opportunityName arguments
are mutually exclusive. Specifying a value for both results in an error. If
doNotCreateOpportunity argument is <code>TRUE</code>, then no Opportunity is created and
this field must be left blank; otherwise, an error is returned.</p></dd>

<dt>overwriteLeadSource</dt>
<dd><p>Specifies whether to overwrite the LeadSource field
on the target Contact object with the contents of the LeadSource field in
the source Lead object (<code>TRUE</code>), or not (<code>FALSE</code>, the default). To
set this field to <code>TRUE</code>, the client application must specify a contactId
for the target contact.</p></dd>

<dt>sendNotificationEmail</dt>
<dd><p>Specifies whether to send a notification email
to the owner specified in the ownerId (<code>TRUE</code>) or not (<code>FALSE</code>,
the default).</p></dd>


</dl><p><a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_calls_convertlead.htm" class="external-link">Salesforce Documentation</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># create a new lead at Grand Hotels &amp; Resorts Ltd</span></span>
<span class="r-in"><span class="va">new_lead</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>FirstName <span class="op">=</span> <span class="st">"Test"</span>, LastName <span class="op">=</span> <span class="st">"Prospect"</span>,</span>
<span class="r-in">                   Company <span class="op">=</span> <span class="st">"Grand Hotels &amp; Resorts Ltd"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rec</span> <span class="op">&lt;-</span> <span class="fu"><a href="sf_create.html">sf_create</a></span><span class="op">(</span><span class="va">new_lead</span>, <span class="st">"Lead"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># find the Id of matching account to link to</span></span>
<span class="r-in"><span class="va">acct_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="sf_query.html">sf_query</a></span><span class="op">(</span><span class="st">"SELECT Id from Account WHERE name = 'Grand Hotels &amp; Resorts Ltd' LIMIT 1"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># create the row(s) for the leads to convert</span></span>
<span class="r-in"><span class="va">to_convert</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>leadId <span class="op">=</span> <span class="va">rec</span><span class="op">$</span><span class="va">id</span>, </span>
<span class="r-in">                     convertedStatus <span class="op">=</span> <span class="st">"Closed - Converted"</span>, </span>
<span class="r-in">                     accountId <span class="op">=</span> <span class="va">acct_id</span><span class="op">$</span><span class="va">Id</span><span class="op">)</span></span>
<span class="r-in"><span class="va">converted_lead</span> <span class="op">&lt;-</span> <span class="fu">sf_convert_lead</span><span class="op">(</span><span class="va">to_convert</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Steven M. Mortimer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    appId: 'BBX5BTLUTL',
    
    apiKey: 'f3a7c81cd6794f9050f32bfee2620882',
    indexName: 'salesforcer',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

