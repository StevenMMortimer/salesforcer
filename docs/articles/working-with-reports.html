<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Working with Reports • salesforcer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Working with Reports">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98603021-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98603021-2');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">salesforcer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-book"></span> Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/supported-queries.html">Supported Queries</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-bulk-apis.html">Working with Bulk APIs</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-reports.html">Working with Reports</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-attachments.html">Working with Attachments</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-metadata.html">Working with Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/passing-control-args.html">Passing Control Args</a></li>
    <li><a class="dropdown-item" href="../articles/transitioning-from-RForcecom.html">Transitioning from RForcecom</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-code-o"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fa-newspaper-o"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/StevenMMortimer/salesforcer"><span class="fa fa-github fa-lg"></span> GitHub</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Working with Reports</h1>
                        <h4 data-toc-skip class="author">Steven M.
Mortimer</h4>
            
            <h4 data-toc-skip class="date">2020-07-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/StevenMMortimer/salesforcer/blob/HEAD/vignettes/working-with-reports.Rmd" class="external-link"><code>vignettes/working-with-reports.Rmd</code></a></small>
      <div class="d-none name"><code>working-with-reports.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The following vignette outlines how to execute and manage reports in
your Org. <strong>Note</strong>: These features are still experimental
and are likely to change and/or have bugs. Please take this into
account, and if you run into any issues please consider submitting an
issue <a href="https://github.com/StevenMMortimer/salesforcer/issues/new?assignees=StevenMMortimer&amp;labels=&amp;template=default-issue-template.md&amp;title=" class="external-link">HERE</a>
in the GitHub repository so that we can help troubleshoot and fix, if
needed. Thank you!</p>
<p>In order to pull down the results of a report created within
Salesforce all you need to know and have is the report’s Salesforce Id.
If you want to fully leverage the features of the Reports and Dashboards
REST API I recommend reading the following so that you are better
equipped to understand and use the functions within {salesforcer}.</p>
<ul>
<li>
<a rel="noopener noreferrer" target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_get_reportdata.htm" class="external-link">Running
a Report Synchronously or Asynchronously</a><br>
</li>
<li>
<a rel="noopener noreferrer" target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_factmap_example.htm" class="external-link">Understanding
a Report Fact Map</a><br>
</li>
<li>
<a rel="noopener noreferrer" target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_filter_reportdata.htm#example_requestbody_execute_resource" class="external-link">Filter
Reports on Demand</a><br>
</li>
<li><a rel="noopener noreferrer" target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_intro.htm" class="external-link">Reports
and Dashboards REST API Documentation Home Page</a></li>
</ul>
<hr>
</div>
<div class="section level2">
<h2 id="authenticate">Authenticate<a class="anchor" aria-label="anchor" href="#authenticate"></a>
</h2>
<p>First, load the {salesforcer} package and login either by OAuth 2.0
(SSO) or using your username, password, and security key.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/StevenMMortimer/salesforcer" class="external-link">salesforcer</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/sf_auth.html">sf_auth</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="running-a-report-in-your-org">Running a Report in your Org<a class="anchor" aria-label="anchor" href="#running-a-report-in-your-org"></a>
</h2>
<p>In Salesforce there is a dedicated page to displaying the list of
reports in your Org. It typically follows the pattern:
<code>https://na1.salesforce.com/00O/o</code> (replace <code>na1</code>
with your server instance). When you click on a report in the GUI you
should see the results. Below is a screenshot of how a report may look
in your Org. Note the report Id in the URL bar.</p>
<div class="float">
<img src="working-with-reports_files%2Freport-screenshot.png" title="A screenshot of the report id where it's embedded in the URL when viewing in a browser" alt="Alt"><div class="figcaption">Alt</div>
</div>
<p>The report Id above (<code>"00O3s000006tE7zEAE"</code>) is the only
information needed to pull those same results from an R session, like
so:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_report_id</span> <span class="op">&lt;-</span> <span class="st">"00O3s000006tE7zEAE"</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_run_report.html">sf_run_report</a></span><span class="op">(</span><span class="va">my_report_id</span><span class="op">)</span></span>
<span><span class="va">results</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 14 × 8</span></span></span>
<span><span class="co">#&gt;   `Contact ID`    `First Name` `test number` `Contact Owner` `Account ID`   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0036A000002C6MW Rose                    <span style="color: #BB0000;">NA</span> Steven Mortimer 0016A0000035mJ4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 0036A000002C6MX Sean                    <span style="color: #BB0000;">NA</span> Steven Mortimer 0016A0000035mJ4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 0036A000002C6MY Jack                    99 Steven Mortimer 0016A0000035mJ5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 0036A000002C6Mb Tim                     <span style="color: #BB0000;">NA</span> Steven Mortimer 0016A0000035mJ8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 0036A000002C6Mc John                    23 Steven Mortimer 0016A0000035mJ8</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 9 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: `Account Name` &lt;chr&gt;, `Billing City` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Account Owner` &lt;chr&gt;</span></span></span></code></pre></div>
<p>Note that the <code><a href="../reference/sf_run_report.html">sf_run_report()</a></code> function will, by default,
run the report asynchronously. This means that a report instance will be
requested and then the function will wait to retrieve the results. The
advantage to using an asynchronous report is that the results of such a
report are stored for 24 hours and can be retrieved again saving CPU
resources, if needed. A more in-depth discussion on synchronous
vs. asynchronous reports is available here <a target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_get_reportdata.htm" class="external-link">https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_get_reportdata.htm</a>.
However, for reports with a relatively small number of records a
synchronous report may be faster without having to do the round trip of
creating then querying a report instance.</p>
</div>
<div class="section level2">
<h2 id="filtering-a-report-on-the-fly">Filtering a Report on the Fly<a class="anchor" aria-label="anchor" href="#filtering-a-report-on-the-fly"></a>
</h2>
<p>The neat thing about using the API is that you can retrieve the
results of a report with different filters applied. This allows you to
obtain exactly the results needed without having to create separate
copies of the same report. It takes some basic understanding of how
report operators need to be supplied to the API, but it is not too
difficult. Below is an example that only includes contact records
created prior to this month and belong to an Account with a non-NULL
Billing City.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># filter records that was created before this month</span></span>
<span><span class="va">filter1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>column <span class="op">=</span> <span class="st">"CREATED_DATE"</span>,</span>
<span>                        operator <span class="op">=</span> <span class="st">"lessThan"</span>, </span>
<span>                        value <span class="op">=</span> <span class="st">"THIS_MONTH"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># filter records where the account billing address city is not empty</span></span>
<span><span class="va">filter2</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>column <span class="op">=</span> <span class="st">"ACCOUNT.ADDRESS1_CITY"</span>,</span>
<span>                        operator <span class="op">=</span> <span class="st">"notEqual"</span>, </span>
<span>                        value <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># combine filter1 and filter2 using 'AND' which means that records must meet both filters</span></span>
<span><span class="va">results_using_AND</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_run_report.html">sf_run_report</a></span><span class="op">(</span><span class="va">my_report_id</span>, </span>
<span>                                   report_boolean_logic <span class="op">=</span> <span class="st">"1 AND 2"</span>,</span>
<span>                                   report_filters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">filter1</span>, <span class="va">filter2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">results_using_AND</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 14 × 8</span></span></span>
<span><span class="co">#&gt;   `Contact ID`    `First Name` `test number` `Contact Owner` `Account ID`   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0036A000002C6MW Rose                    <span style="color: #BB0000;">NA</span> Steven Mortimer 0016A0000035mJ4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 0036A000002C6MX Sean                    <span style="color: #BB0000;">NA</span> Steven Mortimer 0016A0000035mJ4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 0036A000002C6MY Jack                    99 Steven Mortimer 0016A0000035mJ5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 0036A000002C6Mb Tim                     <span style="color: #BB0000;">NA</span> Steven Mortimer 0016A0000035mJ8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 0036A000002C6Mc John                    23 Steven Mortimer 0016A0000035mJ8</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 9 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: `Account Name` &lt;chr&gt;, `Billing City` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Account Owner` &lt;chr&gt;</span></span></span></code></pre></div>
<p>This second example shows how to return only the Top N number of
records and combine the filter using the logical “OR” instead of
“AND”.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># combine filter1 and filter2 using 'OR' which means that records must meet one </span></span>
<span><span class="co"># of the filters but also throw in a row limit based on a specific sort order</span></span>
<span><span class="va">results_using_OR</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_run_report.html">sf_run_report</a></span><span class="op">(</span><span class="va">my_report_id</span>, </span>
<span>                                  report_boolean_logic <span class="op">=</span> <span class="st">"1 OR 2"</span>,</span>
<span>                                  report_filters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">filter1</span>, <span class="va">filter2</span><span class="op">)</span>, </span>
<span>                                  sort_by <span class="op">=</span> <span class="st">"Contact.test_number__c"</span>, </span>
<span>                                  decreasing <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                  top_n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">results_using_OR</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 8</span></span></span>
<span><span class="co">#&gt;   `Contact ID`    `First Name` `test number` `Contact Owner` `Account ID`   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0033s00001CWqsU Test                  <span style="text-decoration: underline;">1</span>000 Steven Mortimer 0013s00001Aizxg</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 0033s00001CWqsV Test                  <span style="text-decoration: underline;">1</span>000 Steven Mortimer 0013s00001Aizxg</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 0033s00001CWqt7 Test                  <span style="text-decoration: underline;">1</span>000 Steven Mortimer 0013s00001Aizxg</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 0033s00001CWqt6 Test                  <span style="text-decoration: underline;">1</span>000 Steven Mortimer 0013s00001Aizxg</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 0033s00001CWqsW Test                  <span style="text-decoration: underline;">1</span>000 Steven Mortimer 0013s00001Aizxg</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: `Account Name` &lt;chr&gt;, `Billing City` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Account Owner` &lt;chr&gt;</span></span></span></code></pre></div>
<p>I was able to determine some of the potential ways to filter by first
reviewing the <code>reportFilters</code> element in the existing report
metadata and also reviewing the list of report filter operators.</p>
<p>First, you can always take the report filter specification from the
report metadata and tailor it to your needs. Below is an example showing
how to get that metadata for our report. You can select specific
elements to better understand the structure of the report.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">report_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_describe_report.html">sf_describe_report</a></span><span class="op">(</span><span class="va">my_report_id</span><span class="op">)</span></span>
<span><span class="va">report_details</span><span class="op">$</span><span class="va">reportMetadata</span><span class="op">$</span><span class="va">reportType</span><span class="op">$</span><span class="va">type</span></span>
<span><span class="co">#&gt; [1] "ContactList"</span></span>
<span><span class="va">report_details</span><span class="op">$</span><span class="va">reportMetadata</span><span class="op">$</span><span class="va">reportFilters</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]]$column</span></span>
<span><span class="co">#&gt; [1] "CREATED_DATE"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$filterType</span></span>
<span><span class="co">#&gt; [1] "fieldValue"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$isRunPageEditable</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$operator</span></span>
<span><span class="co">#&gt; [1] "lessThan"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]]$value</span></span>
<span><span class="co">#&gt; [1] "2019-07-19T04:00:00Z"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [[2]]$column</span></span>
<span><span class="co">#&gt; [1] "ACCOUNT.ADDRESS1_CITY"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]$filterType</span></span>
<span><span class="co">#&gt; [1] "fieldValue"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]$isRunPageEditable</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]$operator</span></span>
<span><span class="co">#&gt; [1] "notEqual"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]$value</span></span>
<span><span class="co">#&gt; [1] ""</span></span></code></pre></div>
<p>Second, Salesforce has a few API endpoints that tell you the fields
on the report or the report type, more generally, and all the ways you
can declare a filter on a particular field type and. The
<code>reportTypeMetadata</code> element returned on the report
description also has detailed information on how to filter the report.
For example, it already contains the start and end dates that would be
applied when using the “LAST_MONTH” filter value on a date field.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">report_details</span><span class="op">$</span><span class="va">reportTypeMetadata</span><span class="op">$</span><span class="va">standardDateFilterDurationGroups</span><span class="op">[[</span><span class="fl">6</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">standardDateFilterDurations</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; $endDate</span></span>
<span><span class="co">#&gt; [1] "2024-10-31"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $label</span></span>
<span><span class="co">#&gt; [1] "Last Month"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $startDate</span></span>
<span><span class="co">#&gt; [1] "2024-10-01"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $value</span></span>
<span><span class="co">#&gt; [1] "LAST_MONTH"</span></span></code></pre></div>
<p>Digging into the metadata of the report will allow you to better
understand what filters you can set when filtering on the fly. In the
example below you should notice that the field names on the report do
not match the names of the typical API field names for the object, so
please review carefully the fields on the report. For example, the
<code>CREATED_DATE</code> report field is based on the
<code>CreatedDate</code> object field.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># report fields</span></span>
<span><span class="va">report_fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_list_report_fields.html">sf_list_report_fields</a></span><span class="op">(</span><span class="va">my_report_id</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">report_fields</span><span class="op">$</span><span class="va">equivalentFieldIndices</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "CONTACT_CREATED_ALIAS"     "Contact.My_External_Id__c"</span></span>
<span><span class="co">#&gt; [3] "IS_EMAIL_BOUNCED"          "REPORTS_TO"               </span></span>
<span><span class="co">#&gt; [5] "ADDRESS2_ZIP"              "LAST_ACTIVITY"</span></span>
<span></span>
<span><span class="va">report_filters</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_list_report_filter_operators.html">sf_list_report_filter_operators</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">unique_supported_fields</span> <span class="op">&lt;-</span> <span class="va">report_filters</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">supported_field_type</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">unique_supported_fields</span></span>
<span><span class="co">#&gt;        supported_field_type1        supported_field_type2 </span></span>
<span><span class="co">#&gt;                       "date"                    "address" </span></span>
<span><span class="co">#&gt;        supported_field_type3        supported_field_type4 </span></span>
<span><span class="co">#&gt;                     "string"                     "double" </span></span>
<span><span class="co">#&gt;        supported_field_type5        supported_field_type6 </span></span>
<span><span class="co">#&gt;                   "picklist"                   "textarea" </span></span>
<span><span class="co">#&gt;        supported_field_type7        supported_field_type8 </span></span>
<span><span class="co">#&gt;            "encryptedstring"                    "percent" </span></span>
<span><span class="co">#&gt;        supported_field_type9       supported_field_type10 </span></span>
<span><span class="co">#&gt;                        "int"                        "url" </span></span>
<span><span class="co">#&gt;       supported_field_type11       supported_field_type12 </span></span>
<span><span class="co">#&gt;                  "reference"                   "datetime" </span></span>
<span><span class="co">#&gt;       supported_field_type13       supported_field_type14 </span></span>
<span><span class="co">#&gt;                    "boolean"                      "phone" </span></span>
<span><span class="co">#&gt;       supported_field_type15       supported_field_type16 </span></span>
<span><span class="co">#&gt; "datacategorygroupreference"                   "currency" </span></span>
<span><span class="co">#&gt;       supported_field_type17       supported_field_type18 </span></span>
<span><span class="co">#&gt;                   "location"                       "html" </span></span>
<span><span class="co">#&gt;       supported_field_type19       supported_field_type20 </span></span>
<span><span class="co">#&gt;                         "id"                       "time" </span></span>
<span><span class="co">#&gt;       supported_field_type21       supported_field_type22 </span></span>
<span><span class="co">#&gt;                      "email"              "multipicklist"</span></span>
<span></span>
<span><span class="co"># operators to filter a picklist field</span></span>
<span><span class="va">picklist_field_operators</span> <span class="op">&lt;-</span> <span class="va">report_filters</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">supported_field_type</span> <span class="op">==</span> <span class="st">"picklist"</span><span class="op">)</span></span>
<span><span class="va">picklist_field_operators</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 3</span></span></span>
<span><span class="co">#&gt;   supported_field_type label         name       </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> picklist             equals        equals     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> picklist             not equal to  notEqual   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> picklist             less than     lessThan   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> picklist             greater than  greaterThan</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> picklist             less or equal lessOrEqual</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="managing-your-reports">Managing your Reports<a class="anchor" aria-label="anchor" href="#managing-your-reports"></a>
</h2>
<p>The API also allows you to perform many admin functions like
creating, copying, updating, or deleting reports and report instances.
Take advantage of these functions as needed to keep your Org’s report
list well-maintained. Below is a simple flow of creating, updating, and
deleting a single report, but the amount you’re able to customize is
completely up to you. The {salesforcer} package should support any
operation that the Reports and Dashboards REST API supports.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first, grab all possible reports in your Org</span></span>
<span><span class="va">all_reports</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_query.html">sf_query</a></span><span class="op">(</span><span class="st">"SELECT Id, Name FROM Report"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># second, get the id of the report to update</span></span>
<span><span class="va">this_report_id</span> <span class="op">&lt;-</span> <span class="va">all_reports</span><span class="op">$</span><span class="va">Id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span><span class="va">new_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_copy_report.html">sf_copy_report</a></span><span class="op">(</span><span class="va">this_report_id</span><span class="op">)</span></span>
<span><span class="co">#&gt; Naming the new report: 'ReportName - Copy'</span></span>
<span></span>
<span><span class="co"># third, update the report (2 ways shown)</span></span>
<span><span class="va">my_updated_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_update_report.html">sf_update_report</a></span><span class="op">(</span><span class="va">new_report</span><span class="op">$</span><span class="va">reportMetadata</span><span class="op">$</span><span class="va">id</span>,</span>
<span>                                      report_metadata <span class="op">=</span></span>
<span>                                        <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>reportMetadata <span class="op">=</span></span>
<span>                                          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Updated Name!"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">my_updated_report</span><span class="op">$</span><span class="va">reportMetadata</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="co">#&gt; [1] "Updated Name!"</span></span>
<span></span>
<span><span class="co"># alternatively, pull down its metadata and update the name</span></span>
<span><span class="va">report_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_describe_report.html">sf_describe_report</a></span><span class="op">(</span><span class="va">new_report</span><span class="op">$</span><span class="va">reportMetadata</span><span class="op">$</span><span class="va">id</span><span class="op">)</span></span>
<span><span class="va">report_details</span><span class="op">$</span><span class="va">reportMetadata</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">report_details</span><span class="op">$</span><span class="va">reportMetadata</span><span class="op">$</span><span class="va">name</span>,</span>
<span>                                             <span class="st">" - UPDATED AGAIN!"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># update the report by passing the metadata</span></span>
<span><span class="va">my_updated_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_update_report.html">sf_update_report</a></span><span class="op">(</span><span class="va">new_report</span><span class="op">$</span><span class="va">reportMetadata</span><span class="op">$</span><span class="va">id</span>,</span>
<span>                                      report_metadata <span class="op">=</span> <span class="va">report_details</span><span class="op">)</span></span>
<span><span class="va">my_updated_report</span><span class="op">$</span><span class="va">reportMetadata</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="co">#&gt; [1] "Updated Name! - UPDATED AGAIN!"</span></span>
<span></span>
<span><span class="co"># fourth, delete that report using its Id</span></span>
<span><span class="va">success</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_delete_report.html">sf_delete_report</a></span><span class="op">(</span><span class="va">new_report</span><span class="op">$</span><span class="va">reportMetadata</span><span class="op">$</span><span class="va">id</span><span class="op">)</span></span>
<span><span class="va">success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<p>If you are having an issue with a report please submit in the
{salesforcer} GitHub repository at:
<a rel="noopener noreferrer" target="_blank" href="https://github.com/StevenMMortimer/salesforcer/issues" class="external-link">https://github.com/StevenMMortimer/salesforcer/issues</a>.
As a maintainer, reports can be are tough to debug because every
Salesforce Org is unique. When filing your issue please make an attempt
to understand the query and debug a little bit on your own. Here are a
few suggestions:</p>
<ol style="list-style-type: decimal">
<li>
<p>Slightly modify your function call to
<code><a href="../reference/sf_run_report.html">sf_run_report()</a></code> to observe the results. Here are a few
prompting questions that may assist you:</p>
<ul>
<li><p>What do you see when you set <code>verbose=TRUE</code>
argument?</p></li>
<li><p>What happens if you run sync. vs. async. (e.g. async=TRUE
vs. FALSE)?</p></li>
<li><p>What happens if you try running a different type of
report?</p></li>
</ul>
</li>
<li><p>Double check Salesforce’s
<a rel="noopener noreferrer" target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_intro.htm" class="external-link">Reports
and Dashboards REST API Developer Guide</a> to see whether if your
report type would be supported or limited in some way.</p></li>
<li><p>Review report unit tests at:
<a rel="noopener noreferrer" target="_blank" href="https://github.com/StevenMMortimer/salesforcer/blob/main/tests/testthat/test-report.R" class="external-link">https://github.com/StevenMMortimer/salesforcer/blob/main/tests/testthat/test-report.R</a>.
These unit tests were written to cover a variety of use cases and to
track any changes made between newly released versions of the Salesforce
API (typically 4 each year). These tests are an excellent source of
examples that may be helpful in troubleshooting your own case.</p></li>
<li>
<p>Roll up your sleeves and dive into the source code for the
{salesforcer} package. The main scripts to review are:</p>
<ul>
<li><p><a rel="noopener noreferrer" target="_blank" href="https://github.com/StevenMMortimer/salesforcer/blob/main/R/analytics-report.R" class="external-link">https://github.com/StevenMMortimer/salesforcer/blob/main/R/analytics-report.R</a></p></li>
<li><p><a rel="noopener noreferrer" target="_blank" href="https://github.com/StevenMMortimer/salesforcer/blob/main/R/utils-report.R" class="external-link">https://github.com/StevenMMortimer/salesforcer/blob/main/R/utils-report.R</a></p></li>
</ul>
</li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steven M. Mortimer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
