<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started • salesforcer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98603021-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98603021-2');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">salesforcer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-book"></span> Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/supported-queries.html">Supported Queries</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-bulk-apis.html">Working with Bulk APIs</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-reports.html">Working with Reports</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-attachments.html">Working with Attachments</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-metadata.html">Working with Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/passing-control-args.html">Passing Control Args</a></li>
    <li><a class="dropdown-item" href="../articles/transitioning-from-RForcecom.html">Transitioning from RForcecom</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-code-o"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fa-newspaper-o"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/StevenMMortimer/salesforcer"><span class="fa fa-github fa-lg"></span> GitHub</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting Started</h1>
                        <h4 data-toc-skip class="author">Steven M.
Mortimer</h4>
            
            <h4 data-toc-skip class="date">2020-08-16</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/StevenMMortimer/salesforcer/blob/HEAD/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="authentication">Authentication<a class="anchor" aria-label="anchor" href="#authentication"></a>
</h2>
<p>First, load the {salesforcer} package and log in. There are two ways
to authenticate:</p>
<ol style="list-style-type: decimal">
<li>OAuth 2.0</li>
<li><del>Basic Username-Password</del></li>
</ol>
<p><strong>NOTE</strong>: Beginning February 1st, 2022, Salesforce will
be requiring customers to enable multi-factor authentication, which
means that basic authentication using password and security token will
no longer work. The function <code><a href="../reference/sf_auth.html">sf_auth()</a></code> will return the
error message:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">INVALID_LOGIN:</span> Invalid username, password, security token<span class="kw">;</span> <span class="ex">or</span> user locked out.</span></code></pre></div>
<p>Also, it is a best practice to use OAuth 2.0 so that passwords do not
have to be embedded within scripts. OAuth 2.0 credentials are stored
locally in a cached file titled <code>.httr-oauth-salesforcer</code> in
the current working directory. The package will automatically refresh
this cached token when it expires so you will not have to call
<code><a href="../reference/sf_auth.html">sf_auth()</a></code> during every R session if the
<code>.httr-oauth-salesforcer</code> file is present in the working
directory.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/StevenMMortimer/salesforcer" class="external-link">salesforcer</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/sf_auth.html">sf_auth</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>Setting up your own Connected App for OAuth</strong></p>
<p>Just a note, that it’s not necessary to setup your own Connected App
in Salesforce to use OAuth 2.0 authentication. The only difference is
that the authentication will be run through the client created and
associated with the {salesforcer} package. By using the package client,
you will <strong>NOT</strong> be giving access to Salesforce to anyone,
the package is just the medium for you to connect to your own data. If
you wanted more control you would specify those options like so:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>salesforcer.consumer_key <span class="op">=</span> <span class="st">"012345678901-99thisisatest99connected33app22key"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>salesforcer.consumer_secret <span class="op">=</span> <span class="st">"Th1s1sMyConsumerS3cr3t"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/sf_auth.html">sf_auth</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>Using a proxy connection</strong></p>
<p>If you are required to connect to Salesforce via proxy you are able
to specify all of those parameters as options, as well. For each call
via <strong>httr</strong> these proxy settings will be passed along with
the Salesforce authentication.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>salesforcer.proxy_url <span class="op">=</span> <span class="st">"64.251.21.73"</span><span class="op">)</span> <span class="co"># IP or a named domain</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>salesforcer.proxy_port <span class="op">=</span> <span class="fl">8080</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>salesforcer.proxy_username <span class="op">=</span> <span class="st">"user"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>salesforcer.proxy_password <span class="op">=</span> <span class="st">"pass"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>salesforcer.proxy_auth <span class="op">=</span> <span class="st">"ntlm"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/sf_auth.html">sf_auth</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>After logging in with <code><a href="../reference/sf_auth.html">sf_auth()</a></code>, you can check your
connectivity by looking at the information returned about the current
user. It should be information about you!</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># pull down information of person logged in</span></span>
<span><span class="co"># it's a simple easy call to get started </span></span>
<span><span class="co"># and confirm a connection to the APIs</span></span>
<span><span class="va">user_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_user_info.html">sf_user_info</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Organization Id: %s"</span>, <span class="va">user_info</span><span class="op">$</span><span class="va">organizationId</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Organization Id: 00D6A0000003dN3UAI"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"User Id: %s"</span>, <span class="va">user_info</span><span class="op">$</span><span class="va">userId</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "User Id: 0056A000000MPRjQAO"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-records">Creating records<a class="anchor" aria-label="anchor" href="#creating-records"></a>
</h2>
<p>Salesforce has objects and those objects contain records. One default
object is the “Contact” object. This example shows how to create two
records in the Contact object.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">new_contacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>FirstName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Test"</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span>                       LastName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Contact-Create-"</span>, <span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">created_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_create.html">sf_create</a></span><span class="op">(</span><span class="va">new_contacts</span>, <span class="st">"Contact"</span><span class="op">)</span></span>
<span><span class="va">created_records</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   id                 success</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 003Kg000002AaC4IAK TRUE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 003Kg000002AaC5IAK TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="retrieving-records">Retrieving records<a class="anchor" aria-label="anchor" href="#retrieving-records"></a>
</h2>
<p>Retrieve pulls down a specific set of records and fields. It’s very
similar to running a query, but doesn’t use SOQL. Here is an example
where we retrieve the data we just created.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">retrieved_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_retrieve.html">sf_retrieve</a></span><span class="op">(</span>ids<span class="op">=</span><span class="va">created_records</span><span class="op">$</span><span class="va">id</span>, </span>
<span>                                 fields<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FirstName"</span>, <span class="st">"LastName"</span><span class="op">)</span>, </span>
<span>                                 object_name<span class="op">=</span><span class="st">"Contact"</span><span class="op">)</span></span>
<span><span class="va">retrieved_records</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">#&gt;   sObject Id                 FirstName LastName        </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Contact 003Kg000002AaC4IAK Test      Contact-Create-1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Contact 003Kg000002AaC5IAK Test      Contact-Create-2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="querying-records">Querying records<a class="anchor" aria-label="anchor" href="#querying-records"></a>
</h2>
<p>Salesforce has proprietary form of SQL called SOQL (Salesforce Object
Query Language). SOQL is a powerful tool that allows you to return the
fields of records in almost any object in Salesforce including Accounts,
Contacts, Tasks, Opportunities, even Attachments! Below is an example
where we grab the data we just created including Account object
information for which the Contact record is associated with.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_soql</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"SELECT Id, </span></span>
<span><span class="st">                           Account.Name, </span></span>
<span><span class="st">                           FirstName, </span></span>
<span><span class="st">                           LastName </span></span>
<span><span class="st">                    FROM Contact </span></span>
<span><span class="st">                    WHERE Id in ('%s')"</span>, </span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">created_records</span><span class="op">$</span><span class="va">id</span> , collapse<span class="op">=</span><span class="st">"','"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">queried_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_query.html">sf_query</a></span><span class="op">(</span><span class="va">my_soql</span><span class="op">)</span></span>
<span><span class="va">queried_records</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">#&gt;   Id                 FirstName LastName        </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 003Kg000002AaC4IAK Test      Contact-Create-1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 003Kg000002AaC5IAK Test      Contact-Create-2</span></span></code></pre></div>
<p><strong>NOTE</strong>: In the example above, you’ll notice that the
<code>"Account.Name"</code> column does not appear in the results. This
is because the SOAP and REST APIs only return an empty Account object
for the record if there is no relationship to an account ( see
<a rel="noopener noreferrer" target="_blank" href="https://github.com/StevenMMortimer/salesforcer/issues/78" class="external-link">#78</a>).
There is no reliable way to extract and rebuild the empty columns based
on the query string. If there were Account information, an additional
column titled <code>"Account.Name"</code> would appear in the results.
Note, that the Bulk 1.0 and Bulk 2.0 APIs will return
<code>"Account.Name"</code> as a column of all <code>NA</code> values
for this query because they return results differently.</p>
</div>
<div class="section level2">
<h2 id="updating-records">Updating records<a class="anchor" aria-label="anchor" href="#updating-records"></a>
</h2>
<p>After creating records you can update them using
<code><a href="../reference/sf_update.html">sf_update()</a></code>. Updating a record requires you to pass the
Salesforce <code>Id</code> of the record. Salesforce creates a unique
18-character identifier on each record and uses that to know which
record to attach the update information you provide. Simply include a
field or column in your update dataset called “Id” and the information
will be matched. Here is an example where we update each of the records
we created earlier with a new first name called “TestTest”.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Update some of those records</span></span>
<span><span class="va">queried_records</span> <span class="op">&lt;-</span> <span class="va">queried_records</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>FirstName <span class="op">=</span> <span class="st">"TestTest"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">updated_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_update.html">sf_update</a></span><span class="op">(</span><span class="va">queried_records</span>, object_name<span class="op">=</span><span class="st">"Contact"</span><span class="op">)</span></span>
<span><span class="va">updated_records</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   id                 success</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 003Kg000002AaC4IAK TRUE   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 003Kg000002AaC5IAK TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="deleting-records">Deleting records<a class="anchor" aria-label="anchor" href="#deleting-records"></a>
</h2>
<p>You can also delete records in Salesforce. The method implements a
“soft” delete meaning that the deleted records go to the Recycle Bin
which can be emptied or queried against later in the event that the
record needed.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">deleted_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_delete.html">sf_delete</a></span><span class="op">(</span><span class="va">updated_records</span><span class="op">$</span><span class="va">id</span><span class="op">)</span></span>
<span><span class="va">deleted_records</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">#&gt;   id                 success errors    </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 003Kg000002AaC4IAK TRUE    <span style="color: #949494;">&lt;list [0]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 003Kg000002AaC5IAK TRUE    <span style="color: #949494;">&lt;list [0]&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="upserting-records">Upserting records<a class="anchor" aria-label="anchor" href="#upserting-records"></a>
</h2>
<p>Finally, Salesforce has a unique method called “upsert” that allows
you to create and/or update records at the same time. More specifically,
if the record is not found based an an “External Id” field, then
Salesforce will create the record instead of updating one. Below is an
example where we create 2 records, then upsert 3, where 2 are matched
and updated and one is created. <strong>NOTE</strong>: You will need to
create a custom field on the target object and ensure it is labeled as
an “External Id” field.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">new_contacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>FirstName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Test"</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span>                       LastName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Contact-Create-"</span>, <span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span>, </span>
<span>                       My_External_Id__c<span class="op">=</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">created_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_create.html">sf_create</a></span><span class="op">(</span><span class="va">new_contacts</span>, <span class="st">"Contact"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">upserted_contacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>FirstName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Test"</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span>                            LastName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Contact-Upsert-"</span>, <span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span>, </span>
<span>                            My_External_Id__c<span class="op">=</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">new_record</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>FirstName <span class="op">=</span> <span class="st">"Test"</span>,</span>
<span>                     LastName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Contact-Upsert-"</span>, <span class="va">n</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span>, </span>
<span>                     My_External_Id__c<span class="op">=</span><span class="va">letters</span><span class="op">[</span><span class="va">n</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">upserted_contacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">upserted_contacts</span>, <span class="va">new_record</span><span class="op">)</span></span>
<span></span>
<span><span class="va">upserted_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_upsert.html">sf_upsert</a></span><span class="op">(</span>input_data<span class="op">=</span><span class="va">upserted_contacts</span>, </span>
<span>                              object_name<span class="op">=</span><span class="st">"Contact"</span>, </span>
<span>                              external_id_fieldname<span class="op">=</span><span class="st">"My_External_Id__c"</span><span class="op">)</span></span>
<span><span class="va">upserted_records</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   id                 success created</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 003Kg000002AaC9IAK TRUE    FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 003Kg000002AaCAIA0 TRUE    FALSE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 003Kg000002AaCEIA0 TRUE    TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="check-out-the-tests">Check out the Tests<a class="anchor" aria-label="anchor" href="#check-out-the-tests"></a>
</h2>
<p>The {salesforcer} package has quite a bit of unit test coverage to
track any changes made between newly released versions of the Salesforce
API (typically 4 each year). These tests are an excellent source of
examples because they cover most all cases of utilizing the package
functions. You can access them here:
<a rel="noopener noreferrer" target="_blank" href="https://github.com/StevenMMortimer/salesforcer/tree/main/tests/testthat/" class="external-link"></a><a href="https://github.com/StevenMMortimer/salesforcer/tree/main/tests/testthat/" class="external-link uri">https://github.com/StevenMMortimer/salesforcer/tree/main/tests/testthat/</a><a></a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steven M. Mortimer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
