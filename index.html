<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>An Implementation of Salesforce APIs Using Tidy Principles • salesforcer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="An Implementation of Salesforce APIs Using Tidy Principles">
<meta name="description" content="Functions connecting to the Salesforce Platform APIs (REST, SOAP, Bulk 1.0, Bulk 2.0, Metadata, Reports and Dashboards) &lt;https://trailhead.salesforce.com/content/learn/modules/api_basics/api_basics_overview&gt;. &quot;API&quot; is an acronym for &quot;application programming interface&quot;. Most all calls from these APIs are supported as they use CSV, XML or JSON data that can be parsed into R data structures. For more details please see the Salesforce API documentation and this package's website &lt;https://stevenmmortimer.github.io/salesforcer/&gt; for more information, documentation, and examples.">
<meta property="og:description" content="Functions connecting to the Salesforce Platform APIs (REST, SOAP, Bulk 1.0, Bulk 2.0, Metadata, Reports and Dashboards) &lt;https://trailhead.salesforce.com/content/learn/modules/api_basics/api_basics_overview&gt;. &quot;API&quot; is an acronym for &quot;application programming interface&quot;. Most all calls from these APIs are supported as they use CSV, XML or JSON data that can be parsed into R data structures. For more details please see the Salesforce API documentation and this package's website &lt;https://stevenmmortimer.github.io/salesforcer/&gt; for more information, documentation, and examples.">
<meta property="og:image" content="https://stevenmmortimer.github.io/salesforcer/reference/figures/salesforcer.png">
<meta property="og:image:alt" content="salesforcer package logo">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98603021-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98603021-2');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">salesforcer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-book"></span> Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="articles/supported-queries.html">Supported Queries</a></li>
    <li><a class="dropdown-item" href="articles/working-with-bulk-apis.html">Working with Bulk APIs</a></li>
    <li><a class="dropdown-item" href="articles/working-with-reports.html">Working with Reports</a></li>
    <li><a class="dropdown-item" href="articles/working-with-attachments.html">Working with Attachments</a></li>
    <li><a class="dropdown-item" href="articles/working-with-metadata.html">Working with Metadata</a></li>
    <li><a class="dropdown-item" href="articles/passing-control-args.html">Passing Control Args</a></li>
    <li><a class="dropdown-item" href="articles/transitioning-from-RForcecom.html">Transitioning from RForcecom</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="reference/index.html"><span class="fa fa-file-code-o"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html"><span class="fa fa-newspaper-o"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/StevenMMortimer/salesforcer"><span class="fa fa-github fa-lg"></span> GitHub</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<p><br><img src="reference/figures/salesforcer.png" alt="salesforcer package logo" width="120px" align="right"></p>
<p>{salesforcer} is an R package that connects to Salesforce Platform APIs using tidy principles. The package implements actions from the REST, SOAP, Bulk 1.0, Bulk 2.0, Reports and Dashboards, and Metadata APIs.</p>
<p>Package features include:</p>
<ul>
<li>OAuth 2.0 (Single Sign On) and Basic (Username-Password) Authentication methods (<code><a href="reference/sf_auth.html">sf_auth()</a></code>)</li>
<li>CRUD (Create, Retrieve, Update, Delete) methods for records using the SOAP, REST, and Bulk APIs</li>
<li>Query records via the SOAP, REST, Bulk 1.0, and Bulk 2.0 APIs using <code><a href="reference/sf_query.html">sf_query()</a></code>
</li>
<li>Manage and execute reports and dashboards with:
<ul>
<li>
<code><a href="reference/sf_list_reports.html">sf_list_reports()</a></code>, <code><a href="reference/sf_create_report.html">sf_create_report()</a></code>, <code><a href="reference/sf_run_report.html">sf_run_report()</a></code>, and more</li>
</ul>
</li>
<li>Retrieve and modify metadata (Custom Objects, Fields, etc.) using the Metadata API with:
<ul>
<li>
<code><a href="reference/sf_describe_objects.html">sf_describe_objects()</a></code>, <code><a href="reference/sf_create_metadata.html">sf_create_metadata()</a></code>, <code><a href="reference/sf_update_metadata.html">sf_update_metadata()</a></code>, and more</li>
</ul>
</li>
<li>Utilize backwards compatible functions for the {RForcecom} package, such as:
<ul>
<li>
<code><a href="reference/rforcecom.login.html">rforcecom.login()</a></code>, <code><a href="reference/rforcecom.getObjectDescription.html">rforcecom.getObjectDescription()</a></code>, <code><a href="reference/rforcecom.query.html">rforcecom.query()</a></code>, <code><a href="reference/rforcecom.create.html">rforcecom.create()</a></code>
</li>
</ul>
</li>
<li>Basic utility calls (<code><a href="reference/sf_user_info.html">sf_user_info()</a></code>, <code><a href="reference/sf_server_timestamp.html">sf_server_timestamp()</a></code>, <code><a href="reference/sf_list_objects.html">sf_list_objects()</a></code>)</li>
<li>Functions to assist with master data management (MDM) or data integrity of records by finding duplicates (<code><a href="reference/sf_find_duplicates.html">sf_find_duplicates()</a></code>, <code><a href="reference/sf_find_duplicates_by_id.html">sf_find_duplicates_by_id()</a></code>), merging records (<code><a href="reference/sf_merge.html">sf_merge()</a></code>), and converting leads (<code><a href="reference/sf_convert_lead.html">sf_convert_lead()</a></code>)</li>
<li>Recover (<code><a href="reference/sf_undelete.html">sf_undelete()</a></code>) or delete from the Recycle Bin (<code><a href="reference/sf_empty_recycle_bin.html">sf_empty_recycle_bin()</a></code>) and list ids of records deleted (<code><a href="reference/sf_get_deleted.html">sf_get_deleted()</a></code>) or updated (<code><a href="reference/sf_get_updated.html">sf_get_updated()</a></code>) within a specific timeframe</li>
<li>Passing API call control parameters such as, “All or None”, “Duplicate Rule”, “Assignment Rule” execution and many more!</li>
</ul>
<div class="section level2">
<h2 id="table-of-contents">Table of Contents<a class="anchor" aria-label="anchor" href="#table-of-contents"></a>
</h2>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#vignettes">Vignettes</a></li>
<li>
<a href="#usage">Usage</a>
<ul>
<li><a href="#authenticate">Authenticate</a></li>
<li><a href="#create">Create</a></li>
<li><a href="#query">Query</a></li>
<li><a href="#update">Update</a></li>
<li><a href="#bulk-operations">Bulk Operations</a></li>
<li><a href="#using-the-metadata-api">Using the Metadata API</a></li>
</ul>
</li>
<li><a href="#future">Future</a></li>
<li><a href="#credits">Credits</a></li>
<li><a href="#more-information">More Information</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install the current CRAN version</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"salesforcer"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># or get the development version on GitHub</span></span>
<span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"StevenMMortimer/salesforcer"</span><span class="op">)</span></span></code></pre></div>
<p>If you encounter an issue while using this package, please file a minimal reproducible example on <a href="https://github.com/stevenmmortimer/salesforcer/issues" class="external-link">GitHub</a>.</p>
</div>
<div class="section level2">
<h2 id="vignettes">Vignettes<a class="anchor" aria-label="anchor" href="#vignettes"></a>
</h2>
<p>The README below outlines the basic package functionality for more detailed notes on how to utilize the features of this package consider reading the following vignettes:</p>
<ul>
<li><a href="https://stevenmmortimer.github.io/salesforcer/articles/getting-started.html">Getting Started</a></li>
<li><a href="https://stevenmmortimer.github.io/salesforcer/articles/supported-queries.html">Supported Queries</a></li>
<li><a href="https://stevenmmortimer.github.io/salesforcer/articles/working-with-bulk-apis.html">Working with Bulk APIs</a></li>
<li><a href="https://stevenmmortimer.github.io/salesforcer/articles/working-with-reports.html">Working with Reports</a></li>
<li><a href="https://stevenmmortimer.github.io/salesforcer/articles/working-with-attachments.html">Working with Attachments</a></li>
<li><a href="https://stevenmmortimer.github.io/salesforcer/articles/working-with-metadata.html">Working with Metadata</a></li>
<li><a href="https://stevenmmortimer.github.io/salesforcer/articles/passing-control-args.html">Passing Control Args</a></li>
<li><a href="https://stevenmmortimer.github.io/salesforcer/articles/transitioning-from-RForcecom.html">Transitioning from RForcecom</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="authenticate">Authenticate<a class="anchor" aria-label="anchor" href="#authenticate"></a>
</h3>
<p>First, load the {salesforcer} package and log in. There are two ways to authenticate:</p>
<ol style="list-style-type: decimal">
<li>OAuth 2.0</li>
<li><del>Basic Username-Password</del></li>
</ol>
<p><strong>NOTE</strong>: Beginning February 1, 2022 authentication via a username and password will not work in most Salesforce organizations. On that date Salesforce will begin requiring customers to enable multi-factor authentication (MFA). The function <code><a href="reference/sf_auth.html">sf_auth()</a></code> will return the error message:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">INVALID_LOGIN:</span> Invalid username, password, security token<span class="kw">;</span> <span class="ex">or</span> user locked out.</span></code></pre></div>
<p>It has always been recommended to use OAuth 2.0 so that passwords do not have to be shared or embedded within scripts. For more information on how OAuth 2.0 works within the {salesforcer} package, please read the <a href="https://stevenmmortimer.github.io/salesforcer/articles/getting-started.html">Getting Started</a> vignette.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/StevenMMortimer/salesforcer" class="external-link">salesforcer</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Using OAuth 2.0 authentication</span></span>
<span><span class="fu"><a href="reference/sf_auth.html">sf_auth</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>After logging in with <code><a href="reference/sf_auth.html">sf_auth()</a></code>, you can check your connectivity by looking at the information returned about the current user. It should be information about you!</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># pull down information of person logged in</span></span>
<span><span class="co"># it's a simple easy call to get started </span></span>
<span><span class="co"># and confirm a connection to the APIs</span></span>
<span><span class="va">user_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sf_user_info.html">sf_user_info</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Organization Id: %s"</span>, <span class="va">user_info</span><span class="op">$</span><span class="va">organizationId</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Organization Id: 00D6A0000003dN3UAI"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"User Id: %s"</span>, <span class="va">user_info</span><span class="op">$</span><span class="va">userId</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "User Id: 0056A000000MPRjQAO"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create">Create<a class="anchor" aria-label="anchor" href="#create"></a>
</h3>
<p>Salesforce has objects and those objects contain records. One default object is the “Contact” object. This example shows how to create two records in the Contact object.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">new_contacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>FirstName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Test"</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span>                       LastName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Contact-Create-"</span>, <span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">created_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sf_create.html">sf_create</a></span><span class="op">(</span><span class="va">new_contacts</span>, object_name <span class="op">=</span> <span class="st">"Contact"</span><span class="op">)</span></span>
<span><span class="va">created_records</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span><span class="co">#&gt;   id                 success</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;              &lt;lgl&gt;  </span></span>
<span><span class="co">#&gt; 1 0033s00001BXHr4AAH TRUE   </span></span>
<span><span class="co">#&gt; 2 0033s00001BXHr5AAH TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="query">Query<a class="anchor" aria-label="anchor" href="#query"></a>
</h3>
<p>Salesforce has proprietary form of SQL called SOQL (Salesforce Object Query Language). SOQL is a powerful tool that allows you to return the attributes of records on almost any object in Salesforce including Accounts, Contacts, Tasks, Opportunities, even Attachments! Below is an example where we grab the data we just created including Account object information for which the Contact record is associated with.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_soql</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"SELECT Id, </span></span>
<span><span class="st">                           Account.Name, </span></span>
<span><span class="st">                           FirstName, </span></span>
<span><span class="st">                           LastName </span></span>
<span><span class="st">                    FROM Contact </span></span>
<span><span class="st">                    WHERE Id in ('%s')"</span>, </span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">created_records</span><span class="op">$</span><span class="va">id</span> , collapse <span class="op">=</span> <span class="st">"','"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">queried_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sf_query.html">sf_query</a></span><span class="op">(</span><span class="va">my_soql</span><span class="op">)</span></span>
<span><span class="va">queried_records</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span><span class="co">#&gt;   Id                 FirstName LastName        </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;           </span></span>
<span><span class="co">#&gt; 1 0033s00001BXHr4AAH Test      Contact-Create-1</span></span>
<span><span class="co">#&gt; 2 0033s00001BXHr5AAH Test      Contact-Create-2</span></span></code></pre></div>
<p><strong>NOTE</strong>: In the example above, you’ll notice that the <code>"Account.Name"</code> column does not appear in the results. This is because the SOAP and REST APIs only return an empty Account object for the record if there is no relationship to an account (see <a rel="noopener noreferrer" target="_blank" href="https://github.com/stevenmmortimer/salesforcer/issues/78" class="external-link">#78</a>). There is no reliable way to extract and rebuild the empty columns based on the query string. If there were Account information, an additional column titled <code>"Account.Name"</code> would appear in the results. Note, that the Bulk 1.0 and Bulk 2.0 APIs will return <code>"Account.Name"</code> as a column of all <code>NA</code> values for this query because they return results differently.</p>
</div>
<div class="section level3">
<h3 id="update">Update<a class="anchor" aria-label="anchor" href="#update"></a>
</h3>
<p>After creating records you can update them using <code><a href="reference/sf_update.html">sf_update()</a></code>. Updating a record requires you to pass the Salesforce <code>Id</code> of the record. Salesforce creates a unique 18-character identifier on each record and uses that to know which record to attach the update information you provide. Simply include a field or column in your update dataset called “Id” and the information will be matched. Here is an example where we update each of the records we created earlier with a new first name called “TestTest”.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Update some of those records</span></span>
<span><span class="va">queried_records</span> <span class="op">&lt;-</span> <span class="va">queried_records</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>FirstName <span class="op">=</span> <span class="st">"TestTest"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="va">updated_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sf_update.html">sf_update</a></span><span class="op">(</span><span class="va">queried_records</span>, object_name <span class="op">=</span> <span class="st">"Contact"</span><span class="op">)</span></span>
<span><span class="va">updated_records</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span><span class="co">#&gt;   id                 success</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;              &lt;lgl&gt;  </span></span>
<span><span class="co">#&gt; 1 0033s00001BXHr4AAH TRUE   </span></span>
<span><span class="co">#&gt; 2 0033s00001BXHr5AAH TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="bulk-operations">Bulk Operations<a class="anchor" aria-label="anchor" href="#bulk-operations"></a>
</h3>
<p>For really large operations (inserts, updates, upserts, deletes, and queries) Salesforce provides the <a href="https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/asynch_api_intro.htm" class="external-link">Bulk 1.0</a> and <a href="https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/introduction_bulk_api_2.htm" class="external-link">Bulk 2.0</a> APIs. In order to use the Bulk APIs in {salesforcer} you can just add <code>api_type = "Bulk 1.0"</code> or <code>api_type = "Bulk 2.0"</code> to your functions and the operation will be executed using the Bulk APIs. It’s that simple.</p>
<p>The benefits of using the Bulk API for larger datasets is that the operation will reduce the number of individual API calls (organization usually have a limit on total calls) and batching the requests in bulk is usually quicker than running thousands of individuals calls when your data is large. <strong>Note:</strong> the Bulk 2.0 API does <strong>NOT</strong> guarantee the order of the data submitted is preserved in the output. This means that you must join on other data columns to match up the Ids that are returned in the output with the data you submitted. For this reason, Bulk 2.0 may not be a good solution for creating, updating, or upserting records where you need to keep track of the created Ids. The Bulk 2.0 API would be fine for deleting records where you only need to know which Ids were successfully deleted.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create contacts using the Bulk API</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">new_contacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>FirstName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Test"</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span>                       LastName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Contact-Create-"</span>, <span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">created_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sf_create.html">sf_create</a></span><span class="op">(</span><span class="va">new_contacts</span>, <span class="st">"Contact"</span>, api_type <span class="op">=</span> <span class="st">"Bulk 1.0"</span><span class="op">)</span></span>
<span><span class="va">created_records</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 4</span></span>
<span><span class="co">#&gt;   Id                 Success Created Error</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;              &lt;lgl&gt;   &lt;lgl&gt;   &lt;lgl&gt;</span></span>
<span><span class="co">#&gt; 1 0033s00001BXHr9AAH TRUE    TRUE    NA   </span></span>
<span><span class="co">#&gt; 2 0033s00001BXHrAAAX TRUE    TRUE    NA</span></span>
<span></span>
<span><span class="co"># query large recordsets using the Bulk API</span></span>
<span><span class="va">my_soql</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"SELECT Id,</span></span>
<span><span class="st">                           FirstName, </span></span>
<span><span class="st">                           LastName</span></span>
<span><span class="st">                    FROM Contact </span></span>
<span><span class="st">                    WHERE Id in ('%s')"</span>, </span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">created_records</span><span class="op">$</span><span class="va">Id</span> , collapse <span class="op">=</span> <span class="st">"','"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">queried_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sf_query.html">sf_query</a></span><span class="op">(</span><span class="va">my_soql</span>, <span class="st">"Contact"</span>, api_type <span class="op">=</span> <span class="st">"Bulk 1.0"</span><span class="op">)</span></span>
<span><span class="va">queried_records</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span><span class="co">#&gt;   Id                 FirstName LastName        </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;           </span></span>
<span><span class="co">#&gt; 1 0033s00001BXHr9AAH Test      Contact-Create-1</span></span>
<span><span class="co">#&gt; 2 0033s00001BXHrAAAX Test      Contact-Create-2</span></span>
<span></span>
<span><span class="co"># delete these records using the Bulk 2.0 API</span></span>
<span><span class="va">deleted_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sf_delete.html">sf_delete</a></span><span class="op">(</span><span class="va">queried_records</span><span class="op">$</span><span class="va">Id</span>, <span class="st">"Contact"</span>, api_type <span class="op">=</span> <span class="st">"Bulk 2.0"</span><span class="op">)</span></span>
<span><span class="va">deleted_records</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 4</span></span>
<span><span class="co">#&gt;   Id                 sf__Id             sf__Created sf__Error</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;              &lt;lgl&gt;       &lt;lgl&gt;    </span></span>
<span><span class="co">#&gt; 1 0033s00001BXHr9AAH 0033s00001BXHr9AAH FALSE       NA       </span></span>
<span><span class="co">#&gt; 2 0033s00001BXHrAAAX 0033s00001BXHrAAAX FALSE       NA</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-the-metadata-api">Using the Metadata API<a class="anchor" aria-label="anchor" href="#using-the-metadata-api"></a>
</h3>
<p>Salesforce is a very flexible platform in that it provides the <a href="https://developer.salesforce.com/docs/atlas.en-us.api_meta.meta/api_meta/meta_intro.htm" class="external-link">Metadata API</a> for users to create, read, update and delete their entire Salesforce environment from objects to page layouts and more. This makes it very easy to programmatically setup and teardown the Salesforce environment. One common use case for the Metadata API is retrieving information about an object (fields, permissions, etc.). You can use the <code><a href="reference/sf_read_metadata.html">sf_read_metadata()</a></code> function to return a list of objects and their metadata. In the example below we retrieve the metadata for the Account and Contact objects. Note that the <code>metadata_type</code> argument is “CustomObject”. Standard Objects are an implementation of CustomObjects, so they are returned using that metadata type.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">read_obj_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sf_read_metadata.html">sf_read_metadata</a></span><span class="op">(</span>metadata_type <span class="op">=</span> <span class="st">'CustomObject'</span>,</span>
<span>                                    object_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Account'</span>, <span class="st">'Contact'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">read_obj_result</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'fullName'</span>, <span class="st">'label'</span>, <span class="st">'sharingModel'</span>, <span class="st">'enableHistory'</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; $fullName</span></span>
<span><span class="co">#&gt; [1] "Account"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $label</span></span>
<span><span class="co">#&gt; [1] "Account"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sharingModel</span></span>
<span><span class="co">#&gt; [1] "ReadWrite"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $enableHistory</span></span>
<span><span class="co">#&gt; [1] "false"</span></span>
<span></span>
<span><span class="va">first_two_fields_idx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">read_obj_result</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">==</span> <span class="st">"fields"</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># show the first two returned fields of the Account object</span></span>
<span><span class="va">read_obj_result</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">first_two_fields_idx</span><span class="op">]</span></span>
<span><span class="co">#&gt; $fields</span></span>
<span><span class="co">#&gt; $fields$fullName</span></span>
<span><span class="co">#&gt; [1] "AccountNumber"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fields$trackFeedHistory</span></span>
<span><span class="co">#&gt; [1] "false"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fields</span></span>
<span><span class="co">#&gt; $fields$fullName</span></span>
<span><span class="co">#&gt; [1] "AccountSource"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fields$trackFeedHistory</span></span>
<span><span class="co">#&gt; [1] "false"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $fields$type</span></span>
<span><span class="co">#&gt; [1] "Picklist"</span></span></code></pre></div>
<p>The data is returned as a list because object definitions are highly nested representations. You may notice that we are missing some really specific details, such as, the picklist values of a field with type “Picklist”. You can get that information using <code><a href="reference/sf_describe_object_fields.html">sf_describe_object_fields()</a></code>. Here is an example using <code><a href="reference/sf_describe_object_fields.html">sf_describe_object_fields()</a></code> where we get a <code>tbl_df</code> with one row for each field on the Account object:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">acct_fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sf_describe_object_fields.html">sf_describe_object_fields</a></span><span class="op">(</span><span class="st">'Account'</span><span class="op">)</span></span>
<span><span class="va">acct_fields</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">label</span>, <span class="va">length</span>, <span class="va">soapType</span>, <span class="va">type</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 68 × 5</span></span>
<span><span class="co">#&gt;   name           label            length soapType    type     </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;            &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;    </span></span>
<span><span class="co">#&gt; 1 Id             Account ID       18     tns:ID      id       </span></span>
<span><span class="co">#&gt; 2 IsDeleted      Deleted          0      xsd:boolean boolean  </span></span>
<span><span class="co">#&gt; 3 MasterRecordId Master Record ID 18     tns:ID      reference</span></span>
<span><span class="co">#&gt; 4 Name           Account Name     255    xsd:string  string   </span></span>
<span><span class="co">#&gt; 5 Type           Account Type     255    xsd:string  picklist </span></span>
<span><span class="co">#&gt; # … with 63 more rows</span></span>
<span></span>
<span><span class="co"># show the picklist selection options for the Account Type field</span></span>
<span><span class="va">acct_fields</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">label</span> <span class="op">==</span> <span class="st">"Account Type"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">.</span><span class="op">$</span><span class="va">picklistValues</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; # A tibble: 7 × 4</span></span>
<span><span class="co">#&gt;   active defaultValue label                      value                     </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;                      &lt;chr&gt;                     </span></span>
<span><span class="co">#&gt; 1 true   false        Prospect                   Prospect                  </span></span>
<span><span class="co">#&gt; 2 true   false        Customer - Direct          Customer - Direct         </span></span>
<span><span class="co">#&gt; 3 true   false        Customer - Channel         Customer - Channel        </span></span>
<span><span class="co">#&gt; 4 true   false        Channel Partner / Reseller Channel Partner / Reseller</span></span>
<span><span class="co">#&gt; 5 true   false        Installation Partner       Installation Partner      </span></span>
<span><span class="co">#&gt; # … with 2 more rows</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="future">Future<a class="anchor" aria-label="anchor" href="#future"></a>
</h2>
<p>Future APIs to support (roughly in priority order):</p>
<ul>
<li><a href="https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/intro_what_is_chatter_connect.htm" class="external-link">Connect (Chatter) REST API</a></li>
<li><a href="https://developer.salesforce.com/docs/atlas.en-us.bi_dev_guide_ext_data.meta/bi_dev_guide_ext_data/bi_ext_data_overview.htm" class="external-link">Analytics External Data API</a></li>
<li><a href="https://developer.salesforce.com/docs/atlas.en-us.bi_dev_guide_rest.meta/bi_dev_guide_rest/bi_rest_overview.htm" class="external-link">Analytics REST API</a></li>
<li><a href="https://developer.salesforce.com/docs/atlas.en-us.api_tooling.meta/api_tooling/intro_api_tooling.htm" class="external-link">Tooling API</a></li>
<li><a href="https://developer.salesforce.com/docs/atlas.en-us.api_action.meta/api_action/actions_intro.htm" class="external-link">Actions API</a></li>
<li><a href="https://developer.salesforce.com/docs/atlas.en-us.api_streaming.meta/api_streaming/intro_stream.htm" class="external-link">Streaming API</a></li>
<li><a href="https://developer.salesforce.com/docs/atlas.en-us.api_placeorder.meta/api_placeorder/sforce_placeorder_rest_api_intro.htm" class="external-link">Place Order API</a></li>
<li><a href="https://developer.salesforce.com/docs/atlas.en-us.api_rest_industries.meta/api_rest_industries/intro.htm" class="external-link">Industries API</a></li>
<li><a href="https://developer.salesforce.com/docs/atlas.en-us.datadotcom_api_dev_guide.meta/datadotcom_api_dev_guide/datadotcom_api_dev_guide_intro.htm" class="external-link">Data.com API</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="credits">Credits<a class="anchor" aria-label="anchor" href="#credits"></a>
</h2>
<p>This application uses other open source software components. The authentication components are mostly verbatim copies of the routines established in the {googlesheets} package (<a href="https://github.com/jennybc/googlesheets" class="external-link uri">https://github.com/jennybc/googlesheets</a>). Methods are inspired by the {RForcecom} package (<a href="https://github.com/hiratake55/RForcecom" class="external-link uri">https://github.com/hiratake55/RForcecom</a>). We acknowledge and are grateful to these developers for their contributions to open source.</p>
</div>
<div class="section level2">
<h2 id="more-information">More Information<a class="anchor" aria-label="anchor" href="#more-information"></a>
</h2>
<p>Salesforce provides client libraries and examples in many programming languages (Java, Python, Ruby, and PhP) but unfortunately R is not a supported language. However, most all operations supported by the Salesforce APIs are available via this package. This package makes requests best formatted to match what the APIs require as input. This articulation is not perfect and continued progress will be made to add and improve functionality. For details on formatting, attributes, and methods please refer to <a href="https://developer.salesforce.com/page/Salesforce_APIs" class="external-link">Salesforce’s documentation</a> as they are explained better there.</p>
<p><a href="https://tidelift.com/subscription/pkg/cran-salesforcer?utm_source=cran-salesforcer&amp;utm_medium=referral&amp;utm_campaign=readme" class="external-link">Get supported salesforcer with the Tidelift Subscription</a></p>
<p><a href="#">Top</a></p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=salesforcer" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/StevenMMortimer/salesforcer/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/StevenMMortimer/salesforcer/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
<li><a href="SUPPORT.html">Getting help</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing salesforcer</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Steven M. Mortimer <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/stevenmmortimer/salesforcer/actions?workflow=R-CMD-check" class="external-link"><img src="https://github.com/stevenmmortimer/salesforcer/workflows/R-CMD-check/badge.svg" alt="R Build Status"></a></li>
<li><a href="https://cran.r-project.org/package=salesforcer" class="external-link"><img src="https://www.r-pkg.org/badges/version/salesforcer" alt="CRAN Status"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: Stable"></a></li>
<li><a href="https://cran.r-project.org/package=salesforcer" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/last-month/salesforcer" alt="Monthly Downloads"></a></li>
<li><a href="https://app.codecov.io/gh/stevenmmortimer/salesforcer?branch=main" class="external-link"><img src="https://codecov.io/gh/stevenmmortimer/salesforcer/branch/main/graph/badge.svg" alt="Coverage Status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steven M. Mortimer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
