<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert Leads — sf_convert_lead • salesforcer</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert Leads — sf_convert_lead"><meta name="description" content="
Converts Leads each into an Account, Contact, as well as (optionally) an Opportunity."><meta property="og:description" content="
Converts Leads each into an Account, Contact, as well as (optionally) an Opportunity."><meta property="og:image" content="https://stevenmmortimer.github.io/salesforcer/reference/figures/salesforcer.png"><meta property="og:image:alt" content="salesforcer package logo"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98603021-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98603021-2');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">salesforcer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-book"></span> Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/supported-queries.html">Supported Queries</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-bulk-apis.html">Working with Bulk APIs</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-reports.html">Working with Reports</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-attachments.html">Working with Attachments</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-metadata.html">Working with Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/passing-control-args.html">Passing Control Args</a></li>
    <li><a class="dropdown-item" href="../articles/transitioning-from-RForcecom.html">Transitioning from RForcecom</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-code-o"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fa-newspaper-o"></span> News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/StevenMMortimer/salesforcer"><span class="fa fa-github fa-lg"></span> GitHub</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Convert Leads</h1>
      <small class="dont-index">Source: <a href="https://github.com/StevenMMortimer/salesforcer/blob/main/R/utils-org.R" class="external-link"><code>R/utils-org.R</code></a></small>
      <div class="d-none name"><code>sf_convert_lead.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>Converts Leads each into an Account, Contact, as well as (optionally) an Opportunity.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sf_convert_lead</span><span class="op">(</span></span>
<span>  <span class="va">input_data</span>,</span>
<span>  guess_types <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  api_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SOAP"</span><span class="op">)</span>,</span>
<span>  control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-input-data">input_data<a class="anchor" aria-label="anchor" href="#arg-input-data"></a></dt>
<dd><p><code>named vector</code>, <code>matrix</code>, <code>data.frame</code>, or
<code>tbl_df</code>; data can be coerced into a <code>data.frame</code>. See the details
below on how format your input data to control things like whether an opportunity
will be created, an email will be sent to the new owner, and other control options.</p></dd>


<dt id="arg-guess-types">guess_types<a class="anchor" aria-label="anchor" href="#arg-guess-types"></a></dt>
<dd><p><code>logical</code>; indicating whether or not to use <code>col_guess()</code>
to try and cast the data returned in the recordset. If <code>TRUE</code> then
<code>col_guess()</code> is used along with <code>anytime()</code> and <code>anydate()</code>.
If <code>FALSE</code> then all fields will be returned as character. Specifying
<code>FALSE</code> helpful when guessing the column data type will result in NA
values and you would like to return the results as strings and then cast in
your script according to your unique specifications.</p></dd>


<dt id="arg-api-type">api_type<a class="anchor" aria-label="anchor" href="#arg-api-type"></a></dt>
<dd><p><code>character</code>; one of <code>"REST"</code>, <code>"SOAP"</code>,
<code>"Bulk 1.0"</code>, or <code>"Bulk 2.0"</code> indicating which API to use when
making the request.</p></dd>


<dt id="arg-control">control<a class="anchor" aria-label="anchor" href="#arg-control"></a></dt>
<dd><p><code>list</code>; a list of parameters for controlling the behavior of
the API call being used. For more information of what parameters are available
look at the documentation for <code><a href="sf_control.html">sf_control</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>arguments passed to <code><a href="sf_control.html">sf_control</a></code></p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p><code>logical</code>; an indicator of whether to print additional
detail for each API call, which is useful for debugging. More specifically, when
set to <code>TRUE</code> the URL, header, and body will be printed for each request,
along with additional diagnostic information where available.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>tbl_df</code> with details of the converted record</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When converting leads owned by a queue, the owner must be specified.
This is because accounts and contacts cannot be owned by a queue. Below is a
complete list of options to control the conversion process. Include a column
in your input data to specify an option for each record. For example, if you
want opportunities to not be created for each converted lead then add a column
in your input data called <code>doNotCreateOpportunity</code> and set its value to
<code>TRUE</code>. The default is <code>FALSE</code> which creates opportunities. The order
of columns in the input data does not matter, just that the names
match (case-insensitive).</p><dl><dt>leadId</dt>
<dd><p>ID of the Lead to convert. Required.</p></dd>

<dt>convertedStatus</dt>
<dd><p>Valid LeadStatus value for a converted lead. Required.</p></dd>

<dt>accountId</dt>
<dd><p>Id of the Account into which the lead will be merged. Required
only when updating an existing account, including person accounts. If no
accountId is specified, then the API creates a new account.</p></dd>

<dt>contactId</dt>
<dd><p>Id of the Contact into which the lead will be merged (this
contact must be associated with the specified accountId, and an accountId
must be specified). Required only when updating an existing contact. If no
contactId is specified, then the API creates a new contact that is implicitly
associated with the Account.</p></dd>

<dt>ownerId</dt>
<dd><p>Specifies the Id of the person to own any newly created account,
contact, and opportunity. If the client application does not specify this
value, then the owner of the new object will be the owner of the lead.</p></dd>

<dt>opportunityId</dt>
<dd><p>The Id of an existing opportunity to relate to the lead.
The opportunityId and opportunityName arguments are mutually exclusive. Specifying
a value for both results in an error. If doNotCreateOpportunity argument is
<code>TRUE</code>, then no Opportunity is created and this field must be left blank;
otherwise, an error is returned.</p></dd>

<dt>doNotCreateOpportunity</dt>
<dd><p>Specifies whether to create an Opportunity during
lead conversion (<code>FALSE</code>, the default) or not (<code>TRUE</code>). Set this flag
to <code>TRUE</code> only if you do not want to create an opportunity from the lead.
An opportunity is created by default.</p></dd>

<dt>opportunityName</dt>
<dd><p>Name of the opportunity to create. If no name is specified,
then this value defaults to the company name of the lead. The maximum length
of this field is 80 characters. The opportunityId and opportunityName arguments
are mutually exclusive. Specifying a value for both results in an error. If
doNotCreateOpportunity argument is <code>TRUE</code>, then no Opportunity is created and
this field must be left blank; otherwise, an error is returned.</p></dd>

<dt>overwriteLeadSource</dt>
<dd><p>Specifies whether to overwrite the LeadSource field
on the target Contact object with the contents of the LeadSource field in
the source Lead object (<code>TRUE</code>), or not (<code>FALSE</code>, the default). To
set this field to <code>TRUE</code>, the client application must specify a contactId
for the target contact.</p></dd>

<dt>sendNotificationEmail</dt>
<dd><p>Specifies whether to send a notification email
to the owner specified in the ownerId (<code>TRUE</code>) or not (<code>FALSE</code>,
the default).</p></dd>


</dl><p><a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_calls_convertlead.htm" class="external-link">Salesforce Documentation</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># create a new lead at Grand Hotels &amp; Resorts Ltd</span></span></span>
<span class="r-in"><span><span class="va">new_lead</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>FirstName <span class="op">=</span> <span class="st">"Test"</span>, LastName <span class="op">=</span> <span class="st">"Prospect"</span>,</span></span>
<span class="r-in"><span>                   Company <span class="op">=</span> <span class="st">"Grand Hotels &amp; Resorts Ltd"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rec</span> <span class="op">&lt;-</span> <span class="fu"><a href="sf_create.html">sf_create</a></span><span class="op">(</span><span class="va">new_lead</span>, <span class="st">"Lead"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># find the Id of matching account to link to</span></span></span>
<span class="r-in"><span><span class="va">acct_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="sf_query.html">sf_query</a></span><span class="op">(</span><span class="st">"SELECT Id from Account WHERE name = 'Grand Hotels &amp; Resorts Ltd' LIMIT 1"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create the row(s) for the leads to convert</span></span></span>
<span class="r-in"><span><span class="va">to_convert</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>leadId <span class="op">=</span> <span class="va">rec</span><span class="op">$</span><span class="va">id</span>, </span></span>
<span class="r-in"><span>                     convertedStatus <span class="op">=</span> <span class="st">"Closed - Converted"</span>, </span></span>
<span class="r-in"><span>                     accountId <span class="op">=</span> <span class="va">acct_id</span><span class="op">$</span><span class="va">Id</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">converted_lead</span> <span class="op">&lt;-</span> <span class="fu">sf_convert_lead</span><span class="op">(</span><span class="va">to_convert</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steven M. Mortimer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

