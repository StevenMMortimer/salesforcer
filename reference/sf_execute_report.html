<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Execute a report — sf_execute_report • salesforcer</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Execute a report — sf_execute_report"><meta name="description" content="
Get summary data with or without details by running a report synchronously or
asynchronously through the API. When you run a report, the API returns data
for the same number of records that are available when the report is run in
the Salesforce user interface. Include the filters argument in your
request to get specific results on the fly by passing dynamic filters,
groupings, and aggregates in the report metadata. Finally, you may want to
use sf_run_report."><meta property="og:description" content="
Get summary data with or without details by running a report synchronously or
asynchronously through the API. When you run a report, the API returns data
for the same number of records that are available when the report is run in
the Salesforce user interface. Include the filters argument in your
request to get specific results on the fly by passing dynamic filters,
groupings, and aggregates in the report metadata. Finally, you may want to
use sf_run_report."><meta property="og:image" content="https://stevenmmortimer.github.io/salesforcer/reference/figures/salesforcer.png"><meta property="og:image:alt" content="salesforcer package logo"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98603021-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98603021-2');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">salesforcer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-book"></span> Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/supported-queries.html">Supported Queries</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-bulk-apis.html">Working with Bulk APIs</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-reports.html">Working with Reports</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-attachments.html">Working with Attachments</a></li>
    <li><a class="dropdown-item" href="../articles/working-with-metadata.html">Working with Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/passing-control-args.html">Passing Control Args</a></li>
    <li><a class="dropdown-item" href="../articles/transitioning-from-RForcecom.html">Transitioning from RForcecom</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-code-o"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fa-newspaper-o"></span> News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/StevenMMortimer/salesforcer"><span class="fa fa-github fa-lg"></span> GitHub</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Execute a report</h1>
      <small class="dont-index">Source: <a href="https://github.com/StevenMMortimer/salesforcer/blob/main/R/analytics-report.R" class="external-link"><code>R/analytics-report.R</code></a></small>
      <div class="d-none name"><code>sf_execute_report.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>Get summary data with or without details by running a report synchronously or
asynchronously through the API. When you run a report, the API returns data
for the same number of records that are available when the report is run in
the Salesforce user interface. Include the <code>filters</code> argument in your
request to get specific results on the fly by passing dynamic filters,
groupings, and aggregates in the report metadata. Finally, you may want to
use <code><a href="sf_run_report.html">sf_run_report</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sf_execute_report</span><span class="op">(</span></span>
<span>  <span class="va">report_id</span>,</span>
<span>  async <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  include_details <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  labels <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  guess_types <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  bind_using_character_cols <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  as_tbl <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  report_metadata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-report-id">report_id<a class="anchor" aria-label="anchor" href="#arg-report-id"></a></dt>
<dd><p><code>character</code>; the Salesforce Id assigned to a created
analytics report. It will start with <code>"00O"</code>.</p></dd>


<dt id="arg-async">async<a class="anchor" aria-label="anchor" href="#arg-async"></a></dt>
<dd><p><code>logical</code>; an indicator, by default set to <code>TRUE</code>, which
executes the report asynchronously. If executed asynchronously, this function
will return a list of attributes of the created report instance. The results
can be pulled down by providing the report id and instance id to
the function <code><a href="sf_get_report_instance_results.html">sf_get_report_instance_results</a></code>. Refer to the details
of the documentation on why executing a report asynchronously is preferred.</p></dd>


<dt id="arg-include-details">include_details<a class="anchor" aria-label="anchor" href="#arg-include-details"></a></dt>
<dd><p><code>logical</code>; an indicator applying to a synchronous
indicating whether the run should return summary data with details.</p></dd>


<dt id="arg-labels">labels<a class="anchor" aria-label="anchor" href="#arg-labels"></a></dt>
<dd><p><code>logical</code>; an indicator of whether the returned data should
be the label (i.e. formatted value) or the actual value. By default, the labels
are returned because these are what appear in the Salesforce dashboard and
more closely align with the column names. For example, "Account.Name" label
may be <code>"Account B"</code> and the value <code>0016A0000035mJEQAY</code>. The former
(label) more accurately reflects the "Account.Name".</p></dd>


<dt id="arg-guess-types">guess_types<a class="anchor" aria-label="anchor" href="#arg-guess-types"></a></dt>
<dd><p><code>logical</code>; indicating whether or not to use <code>col_guess()</code>
to try and cast the data returned in the recordset. If <code>TRUE</code> then
<code>col_guess()</code> is used along with <code>anytime()</code> and <code>anydate()</code>.
If <code>FALSE</code> then all fields will be returned as character. Specifying
<code>FALSE</code> helpful when guessing the column data type will result in NA
values and you would like to return the results as strings and then cast in
your script according to your unique specifications.</p></dd>


<dt id="arg-bind-using-character-cols">bind_using_character_cols<a class="anchor" aria-label="anchor" href="#arg-bind-using-character-cols"></a></dt>
<dd><p><code>logical</code>; an indicator of whether to
cast the data to all character columns to ensure that <code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></code>
does not fail because two paginated recordsets have differing datatypes for the
same column. Set this to <code>TRUE</code> rarely, typically only when having this
set to <code>FALSE</code> returns an error or you want all columns in the data to be
character.</p></dd>


<dt id="arg-as-tbl">as_tbl<a class="anchor" aria-label="anchor" href="#arg-as-tbl"></a></dt>
<dd><p><code>logical</code>; an indicator of whether to convert the parsed
JSON into a <code>tbl_df</code>.</p></dd>


<dt id="arg-report-metadata">report_metadata<a class="anchor" aria-label="anchor" href="#arg-report-metadata"></a></dt>
<dd><p><code>list</code>; a <code>list</code> with one element named
<code>"reportMetadata"</code> having additional list elements underneath. All possible
elements of <code>reportMetadata</code> are documented
<a href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_getbasic_reportmetadata.htm#analyticsapi_basicmetadata" class="external-link">HERE</a>,
but you will most commonly only need to specify the following 3 elements to
filter or query the results of an existing report:</p><dl><dt>reportFormat</dt>
<dd><p>A <code>character</code> specifying the format of the report
with possible values: <code>"TABULAR"</code>, <code>"SUMMARY"</code>, <code>"MATRIX"</code>,
or <code>"MULTI_BLOCK"</code>.</p></dd>

<dt>reportBooleanFilter</dt>
<dd><p>A <code>character</code> denoting how the individuals
filters specified in <code>reportFilters</code> should be combined. For example,
<code>"(1OR4)AND2AND3"</code></p></dd>
.
<dt>reportFilters</dt>
<dd><p>A <code>list</code> of reportFilter specifications. Each must
be a list with 3 elements: 1) <code>column</code>, 2) <code>operator</code>, and 3) <code>value</code>.
You can find out how certain field types can be filtered by reviewing the results
of <code><a href="sf_list_report_filter_operators.html">sf_list_report_filter_operators</a></code>.</p></dd>


</dl></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p><code>logical</code>; an indicator of whether to print additional
detail for each API call, which is useful for debugging. More specifically, when
set to <code>TRUE</code> the URL, header, and body will be printed for each request,
along with additional diagnostic information where available.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>tbl_df</code> by default, but a <code>list</code> when <code>as_tbl=FALSE</code>,
which means that the content from the API is converted from JSON to a list
with no other post-processing.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Run a report synchronously if you expect it to finish running quickly.
Otherwise, we recommend that you run reports through the API asynchronously
for these reasons:</p><ul><li><p>Long running reports have a lower risk of reaching the timeout limit
when run asynchronously.</p></li>
<li><p>The 2-minute overall Salesforce API timeout limit doesn’t apply to
asynchronous runs.</p></li>
<li><p>The Salesforce Reports and Dashboards REST API can handle a higher
number of asynchronous run requests at a time.</p></li>
<li><p>Since the results of an asynchronously run report are stored for a
24-hr rolling period, they’re available for recurring access.</p></li>
</ul><p>Before you filter a report, it helpful to check the following properties in the metadata
that tell you if a field can be filtered, the values and criteria you can filter
by, and filters that already exist in the report:</p><ul><li><p>filterable</p></li>
<li><p>filterValues</p></li>
<li><p>dataTypeFilterOperatorMap</p></li>
<li><p>reportFilters</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="salesforce-documentation">Salesforce Documentation<a class="anchor" aria-label="anchor" href="#salesforce-documentation"></a></h2>


<ul><li><p><a href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_getreportrundata.htm" class="external-link">Sync Documentation</a></p></li>
<li><p><a href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_get_reportdata.htm#example_sync_reportexecute" class="external-link">Sync Example</a></p></li>
<li><p><a href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_instances_summaryasync.htm" class="external-link">Async Documentation</a></p></li>
<li><p><a href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_get_reportdata.htm#example_report_async_instances" class="external-link">Async Example</a></p></li>
<li><p><a href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_filter_reportdata.htm#example_requestbody_execute_resource" class="external-link">Filtering Results</a></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Report functions:
<code><a href="sf_copy_report.html">sf_copy_report</a>()</code>,
<code><a href="sf_create_report.html">sf_create_report</a>()</code>,
<code><a href="sf_delete_report.html">sf_delete_report</a>()</code>,
<code><a href="sf_describe_report.html">sf_describe_report</a>()</code>,
<code><a href="sf_describe_report_type.html">sf_describe_report_type</a>()</code>,
<code><a href="sf_list_report_fields.html">sf_list_report_fields</a>()</code>,
<code><a href="sf_list_report_filter_operators.html">sf_list_report_filter_operators</a>()</code>,
<code><a href="sf_list_report_types.html">sf_list_report_types</a>()</code>,
<code><a href="sf_list_reports.html">sf_list_reports</a>()</code>,
<code><a href="sf_query_report.html">sf_query_report</a>()</code>,
<code><a href="sf_run_report.html">sf_run_report</a>()</code>,
<code><a href="sf_update_report.html">sf_update_report</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># first, get the Id of a report in your Org</span></span></span>
<span class="r-in"><span><span class="va">all_reports</span> <span class="op">&lt;-</span> <span class="fu"><a href="sf_query.html">sf_query</a></span><span class="op">(</span><span class="st">"SELECT Id, Name FROM Report"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">this_report_id</span> <span class="op">&lt;-</span> <span class="va">all_reports</span><span class="op">$</span><span class="va">Id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># then execute a synchronous report that will wait for the results</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">sf_execute_report</span><span class="op">(</span><span class="va">this_report_id</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># alternatively, you can execute an async report and then grab its results when done</span></span></span>
<span class="r-in"><span><span class="co">#   - The benefit of an async report is that the results will be stored for up to</span></span></span>
<span class="r-in"><span><span class="co">#     24 hours for faster recall, if needed</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">sf_execute_report</span><span class="op">(</span><span class="va">this_report_id</span>, async<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check if completed and proceed if the status is "Success"</span></span></span>
<span class="r-in"><span><span class="va">instance_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="sf_list_report_instances.html">sf_list_report_instances</a></span><span class="op">(</span><span class="va">report_id</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">instance_status</span> <span class="op">&lt;-</span> <span class="va">instance_list</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">instance_list</span><span class="op">$</span><span class="va">id</span> <span class="op">==</span> <span class="va">results</span><span class="op">$</span><span class="va">id</span><span class="op">)</span>, <span class="st">"status"</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="va">instance_status</span> <span class="op">==</span> <span class="st">"Success"</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="sf_get_report_instance_results.html">sf_get_report_instance_results</a></span><span class="op">(</span><span class="va">report_id</span>, <span class="va">results</span><span class="op">$</span><span class="va">id</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note: For more complex execution use the report_metadata argument.</span></span></span>
<span class="r-in"><span><span class="co"># This can be done by building the list from scratch based on Salesforce </span></span></span>
<span class="r-in"><span><span class="co"># documentation (not recommended) or pulling down the existing reportMetadata </span></span></span>
<span class="r-in"><span><span class="co"># property of the report and modifying the list slightly (recommended). </span></span></span>
<span class="r-in"><span><span class="co"># In addition, for relatively simple changes, you can leverage the convenience </span></span></span>
<span class="r-in"><span><span class="co"># function sf_report_wrapper() which makes it easier to retrieve report results</span></span></span>
<span class="r-in"><span><span class="va">report_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="sf_describe_report.html">sf_describe_report</a></span><span class="op">(</span><span class="va">this_report_id</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">report_metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>reportMetadata <span class="op">=</span> <span class="va">report_details</span><span class="op">$</span><span class="va">reportMetadata</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">report_metadata</span><span class="op">$</span><span class="va">reportMetadata</span><span class="op">$</span><span class="va">showGrandTotal</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="va">report_metadata</span><span class="op">$</span><span class="va">reportMetadata</span><span class="op">$</span><span class="va">showSubtotals</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu">sf_execute_report</span><span class="op">(</span><span class="va">this_report_id</span>,</span></span>
<span class="r-in"><span>                            report_metadata <span class="op">=</span> <span class="va">report_metadata</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steven M. Mortimer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

